<div class="my-network-wrapper">
  <div class="row no-gutters">
    <div class="col-md-3 col-sm-12 bg-white">
      <app-left-side></app-left-side>
    </div>
    <div class="col-md-7 col-sm-12">
      <ol class="breadcrumb mt-3">
        <li class="breadcrumb-item curPoint"><a [routerLink]="['/dashboard']">Dashboard</a></li>
        <li class="breadcrumb-item active"><a>My Network</a></li>
      </ol>
      <div class="sec-title">
        <div class="title">Connections Request</div>
      </div>
      <ng-container *ngIf="networkConfig.isLoading">
        <div class="col-12 animated fadeIn" *ngFor="let item of [1, 2, 3, 4, 5, 6]">
          <div class="card ml-0 mr-0 my-4" style="height: 100px !important;">
            <div class="card-img skeleton"></div>
          </div>
        </div>
      </ng-container>
      <ng-container>
        <ng-template *ngTemplateOutlet="network"></ng-template>
      </ng-container>
    </div>
    <div class="col-md-2 col-sm-12">
      <app-right-side></app-right-side>
    </div>
  </div>
</div>

<ng-template #network>
  <mat-tab-group>
    <mat-tab label="Connected Users">
      <div
        *ngIf="connectedUserConfig.data.length"
        class="row no-gutters mt-3 max-vertical-h-70 stylishSlimScroll flow-y-auto flow-x-hidden"
      >
        <div class="col-6" *ngFor="let item of connectedUserConfig.data">
          <div class="card m-1 p-2">
            <div class="d-flex align-items-center">
              <div class="row no-gutters">
                <div class="col-2">
                  <img
                    [routerLink]="['/social-network/profile/', item.tasaId]"
                    routerLinkActive="router-link-active"
                    class="status-img img-responsive img-thumbnail curPoint"
                    src="{{
                      item.imageUrl
                        ? item.imageUrl
                        : 'https://raw.githubusercontent.com/azouaoui-med/pro-sidebar-template/gh-pages/src/img/user.jpg'
                    }}"
                    alt="User picture"
                  />
                </div>
                <div class="col-10 pl-3">
                  <div class="d-flex align-items-center w100">
                    <div class="flex-grow-1">
                      <h6 class="mb-0">
                        <a
                          [routerLink]="['/social-network/profile/', item.tasaId]"
                          routerLinkActive="router-link-active"
                          >{{ item.firstName }} {{ item.lastName }}</a
                        >
                      </h6>
                      <!-- <h6 class="text-muted text-truncate" [title]="item.summary" *ngIf="item.summary">
                        {{ item.summary }}
                      </h6> -->
                    </div>
                    <button
                      mat-mini-fab
                      color="warn"
                      matTooltipPosition="below"
                      matTooltip="Inbox"
                      (click)="message(item.id)"
                    >
                      <mat-icon>message</mat-icon>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <ng-container *ngIf="!connectedUserConfig.isLoading && connectedUserConfig.data.length == 0">
        <div class="text-center m-auto animated fadeIn">
          <div class="col-12 text-center">
            <img src="../../../assets/images/no-record.gif" style="height: 300px;" class="d-block m-auto" />
            <h6 class="text-primary">No Connections...!</h6>
          </div>
        </div>
      </ng-container>
    </mat-tab>
    <mat-tab label="Pending Request">
      <div
        *ngIf="networkConfig.data.length"
        class="row no-gutters mt-3 max-vertical-h-70 stylishSlimScroll flow-y-auto flow-x-hidden"
      >
        <div class="col-6" *ngFor="let item of networkConfig.data; let i = index">
          <div class="card m-1 p-2">
            <div class="d-flex align-items-center">
              <div class="row no-gutters">
                <div class="col-2">
                  <img
                    *ngIf="!item?.groupId || item?.groupId === ''"
                    [routerLink]="['/social-network/profile/', item.fromTasaId]"
                    routerLinkActive="router-link-active"
                    class="status-img img-responsive img-thumbnail curPoint"
                    src="{{
                      item.fromImage
                        ? item.fromImage
                        : 'https://raw.githubusercontent.com/azouaoui-med/pro-sidebar-template/gh-pages/src/img/user.jpg'
                    }}"
                    alt="User picture"
                  />
                  <img
                    *ngIf="item?.groupId || item?.groupId !== ''"
                    class="status-img img-responsive img-thumbnail"
                    src="{{ item.groupImageUrl }}"
                    alt="Group picture"
                  />
                </div>
                <div class="col-10 pl-3">
                  <h6 class="mb-0">
                    <a
                      *ngIf="!item?.groupId || item?.groupId === ''"
                      [routerLink]="['/social-network/profile/', item.fromTasaId]"
                      routerLinkActive="router-link-active"
                      >{{ item.fromName }}</a
                    >
                    <a *ngIf="item?.groupId || item?.groupId !== ''">Group - {{ item.groupTitle }}</a>
                  </h6>
                  <h1
                    class="text-muted text-truncate"
                    *ngIf="!item?.groupId || item?.groupId === ''"
                    [title]="item.fromSummary"
                  >
                    {{ item.fromSummary }}
                  </h1>
                  <h1
                    class="text-muted text-truncate"
                    *ngIf="item?.groupId || item?.groupId !== ''"
                    [title]="item.groupDescription"
                  >
                    {{ item.groupDescription }}
                  </h1>
                  <div class="d-flex w100 justify-content-end">
                    <button mat-flat-button color="primary" (click)="approve(item.id, i)" class="rounded-pill">
                      Approve
                    </button>
                    <button mat-flat-button color="accent" (click)="reject(item.id, i)" class="rounded-pill ml-3">
                      Ignore
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <ng-container *ngIf="!networkConfig.isLoading && networkConfig.data.length == 0">
        <div class="text-center m-auto animated fadeIn">
          <div class="col-12 text-center">
            <img src="../../../assets/images/no-record.gif" style="height: 300px;" class="d-block m-auto" />
            <h6 class="text-primary">No Request is Pending...!</h6>
          </div>
        </div>
      </ng-container>
    </mat-tab>
  </mat-tab-group>
</ng-template>
