<div class="d-flex align-items-center no-gutters signup-wrapper">
  <div class="col-sm-8 col-md-12 col-lg-12 mx-auto">
    <!-- <div class="text-center mt-5 mb-1">
      <div class="avatar avatar-lg">
        <img src="assets/images/logo/primary.svg" class="avatar-img rounded-circle" alt="LearnPlus" />
      </div>
    </div> -->
    <div class="navbar-shadow">
      <div class="card-header text-center">
        <h4 class="card-title">Sign Up</h4>
        <p class="card-subtitle">
          <mat-form-field appearance="fill">
            <mat-select (selectionChange)="signupTypeChange()" [(ngModel)]="userType.value" ngDefaultControl>
              <mat-option *ngFor="let item of signupType" [value]="item.value">
                {{ item.viewValue }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </p>
      </div>
      <div class="card-body">
        <!-- <a href="student-dashboard.html" class="btn btn-light btn-block">
          <span class="fab fa-google mr-2"></span>
          Continue with Google
        </a>

        <div class="page-separator">
          <div class="page-separator__text">or</div>
        </div> -->
        <div *ngIf="userType.value == 0 || userType.value == 1">
          <ng-container *ngTemplateOutlet="normalForm"></ng-container>
        </div>
        <div *ngIf="userType.value == 2">
          <ng-container *ngTemplateOutlet="recuiterForm"></ng-container>
        </div>
      </div>
      <div class="card-footer text-center text-black-50 h6 text-muted">
        Already signed up?
        <a class="text-black-70 pointer curPoint h6 p-2" style="text-decoration: underline;" (click)="login()">Login</a>
      </div>
    </div>
  </div>
</div>

<ng-template #normalForm>
  <form [formGroup]="signupForm" (ngSubmit)="onSubmit()" novalidate>
    <div class="min-vertical-h-50 max-vertical-h-50 stylishScroll flow-y-auto flow-x-hidden p-2">
      <div class="form-group">
        <label class="form-label" for="name">First Name <sup class="text-danger">*</sup></label>
        <div class="input-group input-group-merge">
          <input
            id="name"
            type="text"
            formControlName="firstName"
            class="form-control form-control-prepended"
            placeholder="Your first name"
          />
          <div class="input-group-prepend">
            <div class="input-group-text">
              <span class="far fa-user"></span>
            </div>
          </div>
        </div>
        <small
          [hidden]="signupForm.controls.firstName.valid || signupForm.controls.firstName.untouched"
          class="text-danger"
          translate
        >
          First Name is required
        </small>
      </div>
      <div class="form-group">
        <label class="form-label" for="name">Last Name <sup class="text-danger">*</sup></label>
        <div class="input-group input-group-merge">
          <input
            id="name"
            type="text"
            formControlName="lastName"
            class="form-control form-control-prepended"
            placeholder="Your last name"
          />
          <div class="input-group-prepend">
            <div class="input-group-text">
              <span class="far fa-user"></span>
            </div>
          </div>
        </div>
        <small
          [hidden]="signupForm.controls.lastName.valid || signupForm.controls.lastName.untouched"
          class="text-danger"
          translate
        >
          Last Name is required
        </small>
      </div>
      <div class="form-group">
        <label class="form-label" for="name">Username <sup class="text-danger">*</sup></label>
        <div class="input-group input-group-merge">
          <input
            id="name"
            type="text"
            formControlName="username"
            class="form-control form-control-prepended"
            placeholder="Your username"
            (blur)="checkUsername()"
            [ngClass]="{ 'ng-invalid ng-touched': !isUsernameAvailable }"
          />
          <div class="input-group-prepend">
            <div class="input-group-text">
              <span class="far fa-user"></span>
            </div>
          </div>
        </div>
        <small
          [hidden]="signupForm.controls.username.valid || signupForm.controls.username.untouched"
          class="text-danger"
          translate
        >
          <span *ngIf="signupForm.controls.username.errors?.pattern; else elseError">
            No Special characters allowed
          </span>
          <ng-template #elseError>
            Username is required
          </ng-template>
        </small>
        <small [hidden]="isUsernameAvailable" class="text-danger" translate>
          Username already exists
        </small>
      </div>
      <div class="form-group">
        <label class="form-label" for="email">Email address <sup class="text-danger">*</sup></label>
        <div class="input-group input-group-merge">
          <input
            id="email"
            type="email"
            formControlName="email"
            class="form-control form-control-prepended"
            placeholder="Your email address"
            (blur)="checkEmail()"
            [ngClass]="{ 'ng-invalid ng-touched': !isEmailAvailable }"
          />
          <div class="input-group-prepend">
            <div class="input-group-text">
              <span class="far fa-envelope"></span>
            </div>
          </div>
        </div>
        <small
          [hidden]="signupForm.controls.email.valid || signupForm.controls.email.untouched"
          class="text-danger"
          translate
        >
          Email is required
        </small>
        <small [hidden]="isEmailAvailable" class="text-danger" translate>
          Email Address already exists
        </small>
      </div>
      <div class="form-group">
        <label class="form-label" for="password">Password <sup class="text-danger">*</sup></label>
        <div class="input-group input-group-merge">
          <input
            id="password"
            type="password"
            formControlName="password"
            class="form-control form-control-prepended"
            placeholder="Choose a password"
          />
          <div class="input-group-prepend">
            <div class="input-group-text">
              <span class="fas fa-key"></span>
            </div>
          </div>
        </div>
        <small
          [hidden]="signupForm.controls.password.valid || signupForm.controls.password.untouched"
          class="text-danger"
          translate
        >
          Password is required
        </small>
      </div>
      <div class="form-group">
        <label class="form-label" for="password">Confirm Password <sup class="text-danger">*</sup></label>
        <div class="input-group input-group-merge">
          <input
            id="confirmPassword"
            type="password"
            formControlName="confirmPassword"
            class="form-control form-control-prepended"
            placeholder="Type password"
          />
          <div class="input-group-prepend">
            <div class="input-group-text">
              <span class="fas fa-key"></span>
            </div>
          </div>
        </div>
        <small
          *ngIf="!signupForm.controls.confirmPassword.untouched && signupForm.controls.confirmPassword.errors?.required"
          class="text-danger"
          translate
        >
          Confirm Password is required
        </small>
        <small *ngIf="signupForm.controls.confirmPassword.errors?.mustMatch" class="text-danger" translate>
          Confirm Password must match
        </small>
      </div>
    </div>

    <div class="form-group text-center mb-0">
      <div class="custom-control custom-checkbox mb-2 pt-2">
        <input id="terms" type="checkbox" class="custom-control-input" formControlName="termsCond" required="" />
        <label for="terms" class="custom-control-label text-black-70"
          >I agree to the
          <a class="text-black-70 curPoint" (click)="openTerms()" style="text-decoration: underline;"
            >Terms and Condition</a
          >
          And
          <a class="text-black-70 curPoint" (click)="openTerms()" style="text-decoration: underline;"
            >Privacy & Policy.</a
          ></label
        >
      </div>
    </div>
    <div class="form-group text-center">
      <button
        mat-flat-button
        color="primary"
        type="submit"
        [disabled]="signupForm.invalid || !isUsernameAvailable || !isEmailAvailable"
        class="rounded-pill ml-2 w50"
      >
        Sign Up
      </button>
    </div>
  </form>
</ng-template>

<ng-template #recuiterForm>
  <form [formGroup]="signupForm" (ngSubmit)="onSubmit()" novalidate>
    <div class="min-vertical-h-50 max-vertical-h-50 stylishScroll flow-y-auto flow-x-hidden p-2">
      <div class="form-group">
        <label class="form-label" for="name">Organization Name <sup class="text-danger">*</sup></label>
        <div class="input-group input-group-merge">
          <input
            id="name"
            type="text"
            formControlName="organizationName"
            class="form-control form-control-prepended"
            placeholder="Your organization name"
          />
          <div class="input-group-prepend">
            <div class="input-group-text">
              <span class="far fa-user"></span>
            </div>
          </div>
        </div>
        <small
          [hidden]="signupForm.controls.organizationName.valid || signupForm.controls.organizationName.untouched"
          class="text-danger"
          translate
        >
          OrganizationmName is required
        </small>
      </div>
      <div class="form-group">
        <label class="form-label" for="name">Username <sup class="text-danger">*</sup></label>
        <div class="input-group input-group-merge">
          <input
            id="name"
            type="text"
            formControlName="username"
            class="form-control form-control-prepended"
            placeholder="Your username"
            (blur)="checkUsername()"
            [ngClass]="{ 'ng-invalid ng-touched': !isUsernameAvailable }"
          />
          <div class="input-group-prepend">
            <div class="input-group-text">
              <span class="far fa-user"></span>
            </div>
          </div>
        </div>
        <small
          [hidden]="signupForm.controls.username.valid || signupForm.controls.username.untouched"
          class="text-danger"
          translate
        >
          Username is required
        </small>
        <small [hidden]="isUsernameAvailable" class="text-danger" translate>
          Username already exists
        </small>
      </div>
      <div class="form-group">
        <label class="form-label" for="email">Email address <sup class="text-danger">*</sup></label>
        <div class="input-group input-group-merge">
          <input
            id="email"
            type="email"
            formControlName="email"
            class="form-control form-control-prepended"
            placeholder="Your email address"
            (blur)="checkEmail()"
            [ngClass]="{ 'ng-invalid ng-touched': !isEmailAvailable }"
          />
          <div class="input-group-prepend">
            <div class="input-group-text">
              <span class="far fa-envelope"></span>
            </div>
          </div>
        </div>
        <small
          [hidden]="signupForm.controls.email.valid || signupForm.controls.email.untouched"
          class="text-danger"
          translate
        >
          Email is required
        </small>
        <small [hidden]="isEmailAvailable" class="text-danger" translate>
          Email Address already exists
        </small>
      </div>
      <div class="form-group">
        <label class="form-label" for="password">Password <sup class="text-danger">*</sup></label>
        <div class="input-group input-group-merge">
          <input
            id="password"
            type="password"
            formControlName="password"
            class="form-control form-control-prepended"
            placeholder="Choose a password"
          />
          <div class="input-group-prepend">
            <div class="input-group-text">
              <span class="fas fa-key"></span>
            </div>
          </div>
        </div>
        <small
          [hidden]="signupForm.controls.password.valid || signupForm.controls.password.untouched"
          class="text-danger"
          translate
        >
          Password is required
        </small>
      </div>
      <div class="form-group">
        <label class="form-label" for="password">Confirm Password <sup class="text-danger">*</sup></label>
        <div class="input-group input-group-merge">
          <input
            id="confirmPassword"
            type="password"
            formControlName="confirmPassword"
            class="form-control form-control-prepended"
            placeholder="Type password"
          />
          <div class="input-group-prepend">
            <div class="input-group-text">
              <span class="fas fa-key"></span>
            </div>
          </div>
        </div>
        <small
          *ngIf="!signupForm.controls.password.untouched && signupForm.controls.confirmPassword.errors?.required"
          class="text-danger"
          translate
        >
          Confirm Password is required
        </small>
        <small *ngIf="signupForm.controls.confirmPassword.errors?.mustMatch" class="text-danger" translate>
          Confirm Password must match
        </small>
      </div>
    </div>

    <div class="form-group text-center mb-0">
      <div class="custom-control custom-checkbox mb-2">
        <input id="terms" type="checkbox" class="custom-control-input" formControlName="termsCond" required="" />
        <label for="terms" class="custom-control-label text-black-70"
          >I agree to the <a class="text-black-70" style="text-decoration: underline;">Terms and Condition</a></label
        >
      </div>
    </div>

    <div class="form-group text-center">
      <button
        mat-flat-button
        color="primary"
        type="submit"
        [disabled]="signupForm.invalid || !isUsernameAvailable || !isEmailAvailable"
        class="rounded-pill ml-2 w50"
      >
        Sign Up
      </button>
    </div>
  </form>
</ng-template>

<div class="signup-modal">
  <div id="myModal" class="modal" [ngClass]="{ 'd-block': doc != '' }">
    <!-- Modal content -->
    <div class="modal-content">
      <span class="close curPoint" (click)="doc = ''">&times;</span>
      <ngx-doc-viewer [url]="doc" viewer="pdf" style="width: 100%; height: 100%;"></ngx-doc-viewer>
    </div>
  </div>
</div>
